## 情報学群実験第2 ミニレポート

# 実験の目的
 本実験の目的は，周期的に全画面を消して描画し直すという方法でVRAMを書き換えることでアニメーション表示が可能であることを確認することである．
 
# 実験方法
 本実験は，ワームというゲームを行えるプログラムをアセンブリ言語によって作成，アセンブルし，bochsの起動を行うことで，VRAM上での表示を確認した．このゲームは，「画面の中央に初期配置されたワームを操作し，画面端やワームの体に接触しないようにしながら，ランダムに現れるアイテム(J)を食べさせ，ワームを大きくしていく」というものである．プログラムのアルゴリズムは，下記の1~

1. 画面を背景色で塗りつぶす
2. アイテムを描画する．もし，アイテムの座標が設定されていなければ，座標をランダムで決定する
3. キーボード入力を読み取り，ワームの進行方向を決める．入力が無ければ，そのまま進む
4. 進行方向をもとにワームの位置を求める
5. ワームの位置座標が壁に衝突していれば，ゲームを終了する
6. ワームの頭を描画し，ワームの長さに応じて胴体を描画する
7. ワームの頭が自身の体に当たっていないかどうかの判定をする(接触していれば，ゲーム終了)
8. アイテムとワームの位置座標から接触判定を行い，接触していればワームの長さを伸ばし，アイテムを消す(長さに限度あり)

 上記のアルゴリズムは，下記のサブルーチンを用いることで設計されている．このように分割することで，プログラムを分かりやすく，かつ短くするようにしている．

・ アイテムの座標作成のために乱数を作成するサブルーチン
・ キーボード入力がされたかどうかの判定をするサブルーチン
・ ワームの頭の位置が何行目かを導出するサブルーチン
・ ゲームを終了させるサブルーチン
・ timer

 工夫したところと
 上記のサブルーチンにおける乱数作成は，xorshift32，キーボード入力判定は，キーボード関連のBIOSサービスを利用している．

 
# 実験結果
 作成したプログラムの実験結果として，以下のような画面結果が得られた．






 
# 考察
 以上の実験結果から，周期的に全画面を消して描画し直すという方法でVRAMを書き換えることでアニメーション表示が可能であることを確認することができた．